tests_serve:
  container_name: test_serve
  build: ..
  environment:
    GIT_REPOSITORY_SITE: "https://github.com/fogies/web-jekyll-base.git"
  ports:
    - "80:4000"

tests_publish_ssh:
  container_name: test_publish_ssh
  build: ..
  environment:
    GIT_REPOSITORY_SITE: "https://github.com/fogies/web-jekyll-base.git"
  volumes:
    - "{{ CWD }}/tests/test-config/publish_ssh.yml:/docker-jekyll-site/publish_ssh.yml"
    - "{{ CWD }}/tests/test-secrets/publish_ssh_secrets.yml:/docker-jekyll-site/publish_ssh_secrets.yml"
  links:
    - tests_destination_sshd

tests_destination_sshd:
  container_name: test_destination_sshd
  build: test_destination_sshd

tests_publish_local:
  container_name: test_publish_local
  build: ..
  environment:
    GIT_REPOSITORY_SITE: "https://github.com/fogies/web-jekyll-base.git"
  volumes:
    - "{{ CWD }}/tests/test-config/publish_ssh.yml:/docker-jekyll-site/publish_local.yml"
